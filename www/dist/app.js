function runBlock(e,o,n,a,i,t,r,l,u,c,s,d,g){function p(){console.log("authCheck");var e=new Firebase(u.root_url);t.authObj=n(e),t.authObj.$onAuth(function(e){null===e?i.go("login"):(t.onAuthUser(),"login"==i.$current.name&&i.go("tabs.home"))})}p(),t.spinner=!1,s.use("en"),t.goHome=function(){i.go("tabs.home")},t.goHelp=function(){i.go("tabs.help")},t.goAccount=function(){i.go("tabs.account")},t.unAuth=function(){var e=new Firebase(u.root_url);e.unauth(),i.go("login")},t.onAuthUser=function(){function e(e){switch(e.provider){case"password":return e.password.email.replace(/@.*/,"");case"twitter":return e.twitter.displayName;case"facebook":return e.facebook.displayName;case"google":return e.google.displayName}}function o(e){switch(e.provider){case"password":return e.password.email;case"twitter":return e.twitter.displayName;case"facebook":return e.facebook.email;case"google":return e.google.email}}var n=new Firebase(u.users_url),a=function(n){if(n){var a=new Firebase(u.users_url+n.uid);t.authData=n,r(function(){"twitter"==n.provider?t.ownerPictureUrl=n.twitter.cachedUserProfile.profile_image_url:"facebook"==n.provider&&(t.ownerPictureUrl=n.facebook.cachedUserProfile.picture.data.url),a.once("value",function(i){i.val()?(a.child("data").update({name:e(n),email:o(n)?o(n):null,picture:t.ownerPictureUrl?t.ownerPictureUrl:null,lastConnexionDate:Firebase.ServerValue.TIMESTAMP}),a.child("permission").update({role:"User"}),t.authData.firebase=i.val()):(a.child("data").set({provider:n.provider,name:e(n),email:o(n)?o(n):null,picture:t.ownerPictureUrl?t.ownerPictureUrl:null,accountCreationDate:Firebase.ServerValue.TIMESTAMP}),a.child("permission").set({role:"User"}))})})}};n.onAuth(a)},a.ready(function(){window.Connection&&(navigator.connection.type==Connection.NONE&&g.confirm({title:"No Internet Connection",content:"Sorry, no Internet connectivity detected. Please reconnect and try again."}).then(function(e){e||ionic.Platform.exitApp()}),t.online=navigator.onLine?"online":"offline",t.$apply(),window.addEventListener?(window.addEventListener("online",function(){t.online="online",t.$apply()},!0),window.addEventListener("offline",function(){t.online="offline",t.$apply()},!0)):(document.body.ononline=function(){t.online="online",t.$apply()},document.body.onoffline=function(){t.online="offline",t.$apply()})),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&d.style(),window.navigator.language?(t.globalization={value:window.navigator.language},s.use(t.globalization.value)):window.navigator.userLanguage&&(t.globalization={value:window.navigator.userLanguage},s.use(t.globalization.value)),t.device=l.getDevice(),c.getPreferredLanguage().then(function(e){t.globalization=e,t.globalization.value=t.globalization.value.substring(0,2),s.use(t.globalization.value)},function(e){t.globalization=e})},!1)}angular.module("app",["ionic","app.help","app.home","pascalprecht.translate","ngResource","firebase","ngCordova","permission","fooModule"]).run(runBlock),runBlock.$inject=["Permission","$injector","$firebaseAuth","$ionicPlatform","$state","$rootScope","$timeout","$cordovaDevice","FirebaseConfig","$cordovaGlobalization","$translate","$cordovaStatusbar","$ionicPopup"];