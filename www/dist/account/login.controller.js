function LoginController(e,n,o,i){var s=this;s.login={},s.login_message=null,s.spinner=!1;s.register=function(e,o){s.spinner=!0,n.authObj.$createUser({email:e,password:o}).then(function(i){return console.log("User "+i.uid+" created successfully!"),s.login_message="your account has been created, you'll now be connected automatically",n.authObj.$authWithPassword({email:e,password:o})})["catch"](function(i){"INVALID_ARGUMENTS"==i.code?s.login_message="invalid credentials":"INVALID_USER"==i.code?s.login_message="invalid_user":"INVALID_EMAIL"==i.code?s.login_message="The email provided is invalid":"EMAIL_TAKEN"==i.code?(s.login_message="The email provided is already taken",n.userLogin(e,o)):i&&(s.login_message="Please verify your informations"),console.error("Error: ",i.code),s.spinner=!1})},s.returnToLogin=function(){o.go("login")},s.userLogin=function(e,o){s.spinner=!0,n.authObj.$authWithPassword({email:e,password:o}).then(function(e){s.login_message="signin you up..."},function(n){"INVALID_ARGUMENTS"==n.code?s.login_message="invalid credentials":"INVALID_USER"==n.code?s.login_message="This email is not registered":"INVALID_EMAIL"==n.code?s.login_message="The email provided is invalid":"INVALID_PASSWORD"==n.code?s.login_message="The password provided is incorrect":"EMAIL_TAKEN"==n.code?(s.login_message="The email provided is already taken",s.userLogin(e,o)):n&&(s.login_message="Please verify your informations"),s.spinner=!1})},s.userRegister=function(){o.go("register")},s.userLoginPage=function(){o.go("userLogin")},s.returnToLogin=function(){o.go("login")},s.googleLogin=function(){s.spinner=!0;var e=new Firebase(i.root_url);e.authWithOAuthPopup("google",function(n,o){n&&(console.log("Authentication Failed!",n),"TRANSPORT_UNAVAILABLE"===n.code?e.authWithOAuthRedirect("google",function(e,n){e?(console.log("Login Failed!",e),s.spinner=!1):(s.authData=n,s.onAuthUser())},{scope:"email"}):(s.spinner=!1,console.log(n)))},{scope:"email"})},s.twitterLogin=function(){s.spinner=!0;var e=new Firebase(i.root_url);e.authWithOAuthPopup("twitter",function(n,o){n?(console.log("Authentication Failed!",n),"TRANSPORT_UNAVAILABLE"===n.code?e.authWithOAuthRedirect("twitter",function(e,n){e?(console.log("Login Failed!",e),s.spinner=!1):(s.authData=n,s.onAuthUser())}):(s.spinner=!1,console.log(n))):(s.authData=o,s.onAuthUser())})},s.fbLogin=function(){s.spinner=!0;var e=new Firebase(i.root_url);e.authWithOAuthPopup("facebook",function(n,o){n&&(console.log("Authentication Failed!",n),"TRANSPORT_UNAVAILABLE"===n.code?e.authWithOAuthRedirect("facebook",function(e,n){e&&(console.log("Login Failed!",e),s.spinner=!1)}):(s.spinner=!1,console.log(n)))})},s.fbAppLogin=function(){s.spinner=!0;var e=function(e){s.friendsData=e,s.onAuthUser()},n=function(e){s.spinner=!1,s.$apply()},o=function(n){var o=new Firebase(i.root_url);o.authWithOAuthToken("facebook",n.authResponse.accessToken,function(o,i){o?(s.spinner=!1,console.log("Login Failed!",o)):(s.authData=i,s.fbData=n,facebookConnectPlugin.api("/me/friends?fields=id,name,picture",["user_friends"],e,function(e){alert(""+e)}))})};facebookConnectPlugin.login(["public_profile","email","user_friends"],o,n)},s.userLoginPasswordReset=function(e){var o=new Firebase(i.root_url);s.spinner=!0,o.resetPassword({email:e?e:"null@verynull.com"},function(o){o?(s.login_message="Please verify your email: "+o,s.spinner=!1,n.$apply()):(s.login_message="Password reset email sent successfully to "+e,s.spinner=!1,n.$apply())})}}angular.module("app").controller("LoginController",LoginController),LoginController.$inject=["$rootScope","$scope","$state","FirebaseConfig"];