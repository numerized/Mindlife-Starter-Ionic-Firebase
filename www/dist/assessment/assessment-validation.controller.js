function AssessmentValidationController(e,s,n,r,t,a,i,o,u,l,d){var c=this;c.loaded=!1,s.$on("$ionicView.beforeEnter",function(){m(),n(function(){p()})}),s.$on("$ionicView.afterEnter",function(){});var m=function(){c.loaded=!1,l.show({template:"<ion-spinner></ion-spinner>"})},f=function(){c.loaded=!0,l.hide()},p=function(){c.selectedLang="en-GB";var e=new Firebase(r.assessments(s.authData.uid)),n=t(e);n.$bindTo(s,"AsVC.userCurrentAssessmentData"),n.$loaded().then(function(){null==n.header&&(n.header=i.header(c.selectedLang),n.$save()),null==n.prerequisiteForm&&(n.prerequisiteForm=i.prerequisiteForm(c.selectedLang),n.$save()),f()})};c.translate=function(e){return i.getConfigLabelByScore(c.selectedLang,e)?i.getConfigLabelByScore(c.selectedLang,e):" "},c.setLang=function(n){o.use(n.substring(0,2)),c.selectedLang=n;var a=new Firebase(r.assessments(s.authData.uid)),u=t(a);u.$bindTo(s,"AsVC.userCurrentAssessmentData"),u.$loaded().then(function(){c.prerequisiteForm=i.prerequisiteForm(c.selectedLang),angular.forEach(c.prerequisiteForm,function(e,s){e.reply=u.prerequisiteForm[s].reply?u.prerequisiteForm[s].reply:null}),u.preferences={language:n},u.prerequisiteForm=c.prerequisiteForm,u.header=i.header(c.selectedLang),u.$save()}),c.header=i.header(n),e.$broadcast("rzSliderForceRender")},c.submitAnswers=function(){d.nextViewOptions({disableAnimate:!0,disableBack:!0});var e=new Firebase(r.history(s.authData.uid)),n=a(e);n.$add({assessment:c.userCurrentAssessmentData,date:Firebase.ServerValue.TIMESTAMP}).then(function(e){var n=new Firebase(r.assessments(s.authData.uid)),a=t(n);a.$loaded().then(function(){a.questions={},a.prerequisiteForm={},a.header={},a.config={},a.preferences={},a.$save()}),u.go("tabs.assessmentResults")})}}angular.module("app").controller("AssessmentValidationController",AssessmentValidationController),AssessmentValidationController.$inject=["$rootScope","$scope","$timeout","FirebaseFactory","$firebaseObject","$firebaseArray","AssessmentTemplateFactory","$translate","$state","$ionicLoading","$ionicHistory"];